frr version 10.3.1_git
frr defaults datacenter
hostname r1
service integrated-vtysh-config
!
ip prefix-list VRFs seq 10 permit 172.16.0.0/16 le 24
!
ipv6 prefix-list VRFs_v6 seq 10 permit fd00::/64 le 126
!
route-map STRIP-AS permit 10
 set as-path exclude all
exit
!
route-map VRFs permit 10
 match ip address prefix-list VRFs
exit
!
route-map VRFs permit 20
 match ipv6 address prefix-list VRFs_v6
exit
!
vrf mgmt
exit-vrf
!
interface eth1
 description r1 -> l4 [external]
 ip address 10.0.5.1/31
 ipv6 address fd00::10:0:5:1/127
 ipv6 nd ra-interval 5
 no ipv6 nd suppress-ra
exit
!
interface eth2
 description r1 -> l4 [external]
 ip address 10.0.5.3/31
 ipv6 address fd00::10:0:5:3/127
 ipv6 nd ra-interval 5
 no ipv6 nd suppress-ra
exit
!
interface lo
 ip address 192.168.3.1/32
 ipv6 address fd00::192:168:3:1/128
exit
!
router bgp 65100
 bgp router-id 192.168.3.1
 no bgp default ipv4-unicast
 bgp bestpath as-path multipath-relax
 neighbor 10.0.5.0 remote-as 65500
 neighbor 10.0.5.0 description l4
 neighbor 10.0.5.2 remote-as 65500
 neighbor 10.0.5.2 description l4
 neighbor fd00::10:0:5:0 remote-as 65500
 neighbor fd00::10:0:5:0 description l4
 neighbor fd00::10:0:5:2 remote-as 65500
 neighbor fd00::10:0:5:2 description l4
 !
 address-family ipv4 unicast
  network 192.168.3.1/32
  neighbor 10.0.5.0 activate
  no neighbor 10.0.5.0 send-community extended
  neighbor 10.0.5.0 default-originate
  neighbor 10.0.5.0 route-map STRIP-AS in
  neighbor 10.0.5.0 route-map VRFs out
  neighbor 10.0.5.2 activate
  no neighbor 10.0.5.2 send-community extended
  neighbor 10.0.5.2 default-originate
  neighbor 10.0.5.2 route-map STRIP-AS in
  neighbor 10.0.5.2 route-map VRFs out
 exit-address-family
 !
 address-family ipv6 unicast
  network fd00::192:168:3:1/128
  neighbor fd00::10:0:5:0 activate
  no neighbor fd00::10:0:5:0 send-community extended
  neighbor fd00::10:0:5:0 default-originate
  neighbor fd00::10:0:5:0 route-map STRIP-AS in
  neighbor fd00::10:0:5:0 route-map VRFs out
  neighbor fd00::10:0:5:2 activate
  no neighbor fd00::10:0:5:2 send-community extended
  neighbor fd00::10:0:5:2 default-originate
  neighbor fd00::10:0:5:2 route-map STRIP-AS in
  neighbor fd00::10:0:5:2 route-map VRFs out
 exit-address-family
exit
!
